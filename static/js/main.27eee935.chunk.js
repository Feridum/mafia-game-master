(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,n){e.exports=n(156)},156:function(e,t,n){"use strict";n.r(t);var a,r,i,o,c,l,u,s,m,f=n(0),d=n.n(f),p=n(14),E=n.n(p),y=n(204),b=n(22),O=n(21),h=n(94),A=n.n(h),g={items:[],addPlayer:Object(b.b)(function(e,t){e.items.push({id:A()(),active:!0,name:t,fraction:null,role:null})}),assignToRole:Object(b.b)(function(e,t){e.items=e.items.map(function(e){return e.id===t.playerId?Object(O.a)({},e,{fraction:t.fraction,role:t.role}):e.role===t.role?Object(O.a)({},e,{fraction:null,role:null}):e})})},j=n(74),I=n(97),C=n.n(I),S=n(11),N=n(63);!function(e){e.DAY="DAY",e.NIGHT="NIGHT"}(a||(a={})),function(e){e.KILL="KILL",e.MEET="MEET",e.QUICK="QUICK",e.CRAZY="CRAZY"}(r||(r={})),function(e){e.PROSTITUTE_MEET="PROSTITUTE_MEET",e.MAFIA_MEET="MAFIA_MEET",e.BLACKMAIL="BLACKMAIL"}(i||(i={})),function(e){e.MAFIA_KILL="MAFIA_KILL",e.POISON="POISON",e.DEATH_ANGEL="DEATH_ANGEL",e.DOCTOR="DOCTOR",e.DEVIL="DEVIL",e.SPY="SPY",e.SPY2="SPY2"}(o||(o={})),function(e){e.POISON="POISON",e.DEATH="DEATH",e.BLACKMAIL="BLACKMAIL",e.DEATH_ANGEL="DEATH_ANGEL",e.SPY="SPY",e.DOCTOR="DOCTOR",e.DEVIL="DEVIL",e.CRAZY="CRAZY",e.QUICK="QUICK"}(c||(c={})),function(e){e.TOWN="Miasto",e.MAFIA="Mafia",e.SYNDICATE="Syndyk"}(l||(l={})),function(e){e.SPY="Szpieg",e.SPY2="Szpieg 2.0",e.CRAZY="Szaleniec",e.QUICK="Szybki",e.DOCTOR="Doktor",e.NONE="Zwyk\u0142y Obywatel"}(u||(u={})),function(e){e.BOSS="Boss",e.BLACKMAILER="Szanta\u017cysta",e.POISON="Truciciel"}(s||(s={})),function(e){e.DEVIL="Diabolica",e.DEATH_ANGEL="Anio\u0142 \u015amierci",e.PROSTITUTE="Prostytuta",e.SAINT="\u015awi\u0119ty",e.NONE="szeregowy Syndykatu"}(m||(m={}));var v,T=n(98),L=function(e,t,n){var a;return(a={},Object(S.a)(a,c.POISON,Object(O.a)({},e.modifiers,{poison:e.modifiers.poison+1,death:!!e.modifiers.poison})),Object(S.a)(a,c.BLACKMAIL,Object(O.a)({},e.modifiers,{blackmail:!0})),Object(S.a)(a,c.DEATH_ANGEL,Object(O.a)({},e.modifiers,{deathAngel:e.modifiers.deathAngel+1,death:!!e.modifiers.deathAngel})),Object(S.a)(a,c.DEVIL,Object(O.a)({},e.modifiers)),Object(S.a)(a,c.DOCTOR,Object(O.a)({},e.modifiers,{poison:0,death:!0})),Object(S.a)(a,c.SPY,Object(O.a)({},e.modifiers,{spy:n?[].concat(Object(N.a)(e.modifiers.spy),[n]):e.modifiers.spy})),Object(S.a)(a,c.CRAZY,Object(O.a)({},e.modifiers,{death:!0})),Object(S.a)(a,c.QUICK,Object(O.a)({},e.modifiers,{death:!0})),Object(S.a)(a,c.DEATH,Object(O.a)({},e.modifiers,{death:!0})),a)[t]},x={player:g,game:{exisitingGame:!1,periodNumber:0,config:{firstNight:{actions:[{type:i.MAFIA_MEET,message:"Mafia si\u0119 poznaje",action:!1},{type:i.BLACKMAIL,message:"Szanta\u017cysta wybiera ofiar\u0119",action:!0},{type:i.PROSTITUTE_MEET,message:"Prostytutka omamia ofiar\u0119, kt\xf3ry wyjawi wszystko",action:!1}]},day:{actions:[{type:r.KILL,message:"Miasto postanowi\u0142o zabi\u0107",action:!0},{type:r.MEET,message:"Miasto chce pozna\u0107 mieszka\u0144ca",action:!0},{type:r.CRAZY,message:"Szaleniec postanowi\u0142 zabi\u0107",action:!0},{type:r.QUICK,message:"Szybki nie chce da\u0107 si\u0119 zabi\u0107",action:!0}]},night:{actions:[{type:o.MAFIA_KILL,message:"Mafia zabija",action:!0},{type:o.POISON,message:"Truciel zatruwa osob\u0119",action:!0},{type:o.DEATH_ANGEL,message:"Anio\u0142 \u015bmierci naznacza",action:!0},{type:o.DOCTOR,message:"Lekarz leczy",action:!0},{type:o.DEVIL,message:"Diabolica rozpoczyna seans spirytystyczny",action:!0},{type:o.SPY,message:"Szpiego poznaje to\u017csamo\u015b\u0107 gracza",action:!0},{type:o.SPY2,message:"Szpieg v2 poznaje to\u017csamo\u015b\u0107 gracza",action:!0}]}},players:[],log:[],period:Object(b.c)(function(e){return e.periodNumber%2?a.DAY:a.NIGHT}),roles:Object(b.c)(function(e){return e.players.filter(function(e){return!e.modifiers.death}).map(function(e){return e.role})}),fractions:Object(b.c)(function(e){return Object(T.uniq)(e.players.filter(function(e){return!e.modifiers.death}).map(function(e){return e.fraction}))}),applyModifier:Object(b.b)(function(e,t){e.players=e.players.map(function(e){return t.players.includes(e.playerId)?Object(O.a)({},e,{role:t.modifier===c.DEVIL&&e.modifiers.death?m.NONE:e.role,fraction:t.modifier===c.DEVIL&&e.modifiers.death?l.SYNDICATE:e.fraction,modifiers:L(e,t.modifier,t.spyInfo)}):t.modifier===c.CRAZY&&e.role==u.CRAZY?Object(O.a)({},e,{role:u.NONE}):t.modifier===c.QUICK&&e.role===u.QUICK?Object(O.a)({},e,{role:u.NONE}):e})}),startGame:Object(b.b)(function(e,t){e.exisitingGame=!0,e.players=t.players.map(function(e){return{playerId:e.id,name:e.name,role:e.role,fraction:e.fraction,modifiers:{poison:0,death:!1,blackmail:!1,deathAngel:0,spy:[]}}})}),nextPeriod:Object(b.b)(function(e){e.periodNumber=e.periodNumber+1}),previousPeriod:Object(b.b)(function(e){e.periodNumber=e.periodNumber-1})}},D={key:"root",storage:C.a},M=Object(b.d)(x,{reducerEnhancer:function(e){return Object(j.a)(D,e)}}),P=Object(j.b)(M),Y=M.useStoreActions,w=(M.useStoreDispatch,M.useStoreState),z=n(102),k=n(16),G=n(160),R=Object(G.a)(function(e){return{container:{minHeight:"100vh",display:"flex",flexDirection:"column"},childContainer:{marginTop:e.spacing(2),display:"flex",flexDirection:"column",flexGrow:1}}}),W=n(189),_=n(190),K=function(e){var t=e.children,n=e.toolbar,a=e.displayAppBar,r=void 0!==a&&a,i=R();return d.a.createElement("div",{className:i.container},r&&d.a.createElement(W.a,{position:"static",color:"default"},d.a.createElement(_.a,null,n)),d.a.createElement("div",{className:i.childContainer},t))},U=n(191),H=Object(G.a)(function(e){return{button:{width:"100%",height:100,marginBottom:e.spacing(2)}}});!function(e){e.MAIN_MENU="/",e.PLAYERS="/players",e.ADD_PLAYER="/players/new",e.ASSIGN_PLAYERS="/fractions/players",e.GAME_MENU="/game/menu/",e.GAME="/game"}(v||(v={}));var B,Z=function(){var e=H(),t=Object(f.useContext)(k.d);return d.a.createElement(K,null,d.a.createElement(U.a,{variant:"outlined",color:"primary",classes:{root:e.button},onClick:function(){return t.history.push(v.PLAYERS)}},"Gracze"),d.a.createElement(U.a,{variant:"outlined",color:"primary",classes:{root:e.button},onClick:function(){return t.history.push(v.ASSIGN_PLAYERS)}},"Przypisz role"),d.a.createElement(U.a,{variant:"outlined",color:"primary",classes:{root:e.button},onClick:function(){return t.history.push(v.GAME_MENU)}},"Zacznij gre"))},F=n(193),Q=n(194),V=Object(G.a)(function(e){return{container:{display:"flex",flexDirection:"column",height:0,overflowY:"scroll",flexGrow:1,"&::-webkit-scrollbar":{width:"0 !important"}},addContainer:{position:"fixed",bottom:0,height:100,backgroundColor:"#fff"}}}),q=Object(G.a)(function(e){return{container:{padding:e.spacing(2)}}}),J=n(161),$=n(192),X=function(e){var t=e.player,n=q();return d.a.createElement(J.a,{classes:{root:n.container}},d.a.createElement($.a,{variant:"h5",component:"h3"},t.name))},ee=function(){var e=w(function(e){return e.player.items}),t=V(),n=Object(f.useContext)(k.d);return d.a.createElement(K,{displayAppBar:!0,toolbar:d.a.createElement(F.a,{color:"secondary","aria-label":"Add",onClick:function(){return n.history.push(v.ADD_PLAYER)}},d.a.createElement(Q.a,null))},d.a.createElement("div",{className:t.container},e.map(function(e){return d.a.createElement(X,{player:e})})))},te=n(75),ne=n(100),ae=n(195),re=function(){var e=Object(f.useContext)(k.d),t=Y(function(e){return e.player.addPlayer});return d.a.createElement(K,null,d.a.createElement(te.b,{onSubmit:function(n){t(n.name),e.history.goBack()},initialValues:{name:""},render:function(e){var t=e.handleSubmit,n=e.submitting;return d.a.createElement("form",{onSubmit:t,noValidate:!0},d.a.createElement(te.a,{fullWidth:!0,required:!0,name:"name",component:ne.TextField,type:"text",label:"Imie gracza",validate:function(e){return e.length>0?void 0:"Pole wymagane"}}),d.a.createElement(ae.a,{item:!0,style:{marginTop:16}},d.a.createElement(U.a,{variant:"contained",color:"primary",type:"submit",disabled:n},"Dodaj")))}}))},ie=Object(G.a)(function(e){return{container:{padding:e.spacing(2)}}}),oe=function(e){var t=e.player,n=ie(),a=Object(f.useContext)(k.d);return d.a.createElement(J.a,{classes:{root:n.container},onClick:function(){return a.history.push("/fractions/players/".concat(t.id))}},d.a.createElement($.a,{variant:"h5",component:"h3"},t.name),t.role&&d.a.createElement($.a,{variant:"h6",component:"h6"},t.role))},ce=function(){var e=w(function(e){return e.player.items});return d.a.createElement(K,null,d.a.createElement("div",null,e.map(function(e){return d.a.createElement(oe,{player:e})})))},le=n(29),ue=n(62),se=n.n(ue),me=n(59),fe=n(206),de=n(196),pe=n(197),Ee=n(198),ye=n(199),be=Object(G.a)(function(e){return{fullWidth:{minWidth:"unset"}}}),Oe=Object(G.a)(function(e){return{container:{padding:e.spacing(2)}}}),he=function(e){var t=e.role,n=e.fraction,a=Oe(),r=Object(f.useContext)(k.d),i=Y(function(e){return e.player.assignToRole}),o=r.match.params.id;return d.a.createElement(J.a,{classes:{root:a.container},onClick:function(){o&&i({role:t,playerId:o,fraction:n}),r.history.goBack()}},d.a.createElement($.a,{variant:"h5",component:"h3"},t))},Ae=function(){var e=be(),t=Object(me.a)(),n=Object(f.useState)(0),a=Object(le.a)(n,2),r=a[0],i=a[1];return d.a.createElement(K,null,d.a.createElement(W.a,{position:"static",color:"default"},d.a.createElement(fe.a,{value:r,onChange:function(e,t){i(t)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},d.a.createElement(de.a,{icon:d.a.createElement(pe.a,null),classes:{fullWidth:e.fullWidth}}),d.a.createElement(de.a,{icon:d.a.createElement(Ee.a,null),classes:{fullWidth:e.fullWidth}}),d.a.createElement(de.a,{icon:d.a.createElement(ye.a,null),classes:{fullWidth:e.fullWidth}}))),d.a.createElement(se.a,{axis:"rtl"===t.direction?"x-reverse":"x",index:r,onChangeIndex:function(e){i(e)}},d.a.createElement("div",{dir:t.direction},Object.values(u).map(function(e){return d.a.createElement(he,{role:e,fraction:l.TOWN})})),d.a.createElement("div",{dir:t.direction},Object.values(s).map(function(e){return d.a.createElement(he,{role:e,fraction:l.MAFIA})})),d.a.createElement("div",{dir:t.direction},Object.values(m).map(function(e){return d.a.createElement(he,{role:e,fraction:l.SYNDICATE})}))))},ge=Object(G.a)(function(e){return{fullWidth:{minWidth:"unset"},flexGrow:{display:"flex",flexDirection:"column",flexGrow:1},scrollableContainer:{display:"flex",flexDirection:"column",height:0,overflowY:"scroll",flexGrow:1,"&::-webkit-scrollbar":{width:"0 !important"}}}}),je=Object(G.a)(function(e){return{container:{padding:e.spacing(2)}}}),Ie=function(e){var t=e.player,n=je();return d.a.createElement(U.a,{classes:{root:n.container},disabled:t.modifiers.death},d.a.createElement($.a,{variant:"h5",component:"h5"},t.name," (",t.role,")"),"}")},Ce=n(205),Se=n(201),Ne=Object(G.a)(function(e){return{container:{display:"flex",flexDirection:"column",flexGrow:1}}}),ve=n(208),Te=n(200),Le=n(202),xe=(B={},Object(S.a)(B,l.MAFIA,"Nie z mafii"),Object(S.a)(B,l.SYNDICATE,"Nie z syndyku"),Object(S.a)(B,l.TOWN,"Nie z miasta"),B),De=function(e){var t=e.open,n=e.onClose,a=e.onClick,r=e.isSpy,i=Object(f.useState)([]),o=Object(le.a)(i,2),c=o[0],u=o[1],s=Object(f.useState)(null),m=Object(le.a)(s,2),p=m[0],E=m[1],y=w(function(e){return e.game.players}),b=function(){a(c,""),n()},O=function(e,t){a([e],t),n()};return d.a.createElement(ve.a,{fullScreen:!0,open:t,onClose:n},d.a.createElement(Te.a,null,p?d.a.createElement(f.Fragment,null,d.a.createElement($.a,{variant:"h5",component:"h3"},p.name," ",p.fraction),0===p.modifiers.spy.length&&d.a.createElement($.a,{variant:"h5",component:"h3"},"O tym graczu nie by\u0142a jeszcze sprawdzona informacja"),p.modifiers.spy.map(function(e){return d.a.createElement($.a,{variant:"h5",component:"h3"},xe[e])}),d.a.createElement(Se.a,{fullWidth:!0},Object.values(l).filter(function(e){return e!==p.fraction}).map(function(e){return d.a.createElement(U.a,{onClick:function(){return O(p.playerId,e)}},xe[e])}))):y.map(function(e){return d.a.createElement(U.a,{fullWidth:!0,variant:c.includes(e.playerId)?"contained":"outlined",onClick:function(){return function(e){r?E(e):c.includes(e.playerId)?u(c.filter(function(t){return t!==e.playerId})):u([].concat(Object(N.a)(c),[e.playerId]))}(e)},key:e.playerId},e.name)})),d.a.createElement(Le.a,null,d.a.createElement(U.a,{onClick:p?function(){return E(null)}:n,color:"primary"},"Anuluj"),!r&&d.a.createElement(U.a,{onClick:function(){return b()},color:"primary",disabled:0===c.length},"Zatwierd\u017a zmainy dla graczy")))},Me=function(e){var t,n=e.action,a=Object(f.useState)(!1),i=Object(le.a)(a,2),l=i[0],u=i[1],s=Object(f.useState)({action:function(){},isSpy:!1}),m=Object(le.a)(s,2),p=m[0],E=m[1],y=Object(f.useState)(!1),b=Object(le.a)(y,2),O=b[0],h=b[1],A=Y(function(e){return e.game.applyModifier}),g=(t={},Object(S.a)(t,r.KILL,function(e){return A({players:e,modifier:c.DEATH})}),Object(S.a)(t,r.MEET,function(e,t){return A({players:e,modifier:c.SPY,spyInfo:t})}),Object(S.a)(t,r.CRAZY,function(e){return A({players:e,modifier:c.CRAZY})}),Object(S.a)(t,r.QUICK,function(e){return A({players:e,modifier:c.QUICK})}),Object(S.a)(t,o.MAFIA_KILL,function(e){return A({players:e,modifier:c.DEATH})}),Object(S.a)(t,o.DEATH_ANGEL,function(e){return A({players:e,modifier:c.DEATH_ANGEL})}),Object(S.a)(t,o.DEVIL,function(e){return A({players:e,modifier:c.DEVIL})}),Object(S.a)(t,o.DOCTOR,function(e){return A({players:e,modifier:c.DOCTOR})}),Object(S.a)(t,o.POISON,function(e){return A({players:e,modifier:c.POISON})}),Object(S.a)(t,o.SPY,function(e,t){return A({players:e,modifier:c.SPY,spyInfo:t})}),Object(S.a)(t,o.SPY2,function(e,t){return A({players:e,modifier:c.SPY,spyInfo:t})}),t),j=[o.SPY,o.SPY2,r.MEET];return d.a.createElement(f.Fragment,null,d.a.createElement(U.a,{fullWidth:!0,variant:l?"contained":"outlined",onClick:function(){u(!0),n.action&&(E({action:g[n.type],isSpy:j.includes(n.type)}),h(!0))}},n.message),O&&d.a.createElement(De,{open:O,onClose:function(){return h(!1)},onClick:p.action,isSpy:p.isSpy}))},Pe=function(){var e=Ne(),t=w(function(e){return e.game.period}),n=w(function(e){return e.game.periodNumber}),i=w(function(e){return e.game.config.firstNight.actions}),o=w(function(e){return e.game.config.day.actions}),c=w(function(e){return e.game.config.night.actions}),l=Y(function(e){return e.game.nextPeriod}),s=Y(function(e){return e.game.previousPeriod}),m=w(function(e){return e.game.roles}),p=null;return 0===n?p=i:t===a.DAY?p=o.filter(function(e){return e.type===r.QUICK?m.includes(u.QUICK):e.type!==r.CRAZY||m.includes(u.CRAZY)}):t===a.NIGHT&&(p=c),d.a.createElement(f.Fragment,null,d.a.createElement(Ce.a,{className:e.container},p&&p.map(function(e){return d.a.createElement(Me,{action:e})})),d.a.createElement(Se.a,{fullWidth:!0},n>0&&d.a.createElement(U.a,{onClick:function(){return s()}},"Wr\xf3\u0107"),d.a.createElement(U.a,{onClick:function(){return l()}},"Nast\u0119pny")))},Ye=function(){var e=ge(),t=Object(me.a)(),n=Object(f.useState)(1),a=Object(le.a)(n,2),r=a[0],i=a[1],o=w(function(e){return e.game.players});w(function(e){return e.game.log});return d.a.createElement(K,null,d.a.createElement(W.a,{position:"static",color:"default"},d.a.createElement(fe.a,{value:r,onChange:function(e,t){i(t)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth"},d.a.createElement(de.a,{icon:d.a.createElement(pe.a,null),classes:{fullWidth:e.fullWidth}}),d.a.createElement(de.a,{icon:d.a.createElement(Ee.a,null),classes:{fullWidth:e.fullWidth}}),d.a.createElement(de.a,{icon:d.a.createElement(ye.a,null),classes:{fullWidth:e.fullWidth}}))),d.a.createElement(se.a,{axis:"rtl"===t.direction?"x-reverse":"x",index:r,onChangeIndex:function(e){i(e)},className:e.flexGrow,slideClassName:e.flexGrow,containerStyle:{flexGrow:1,display:"flex"}},d.a.createElement("div",{dir:t.direction,className:e.flexGrow},"Logs"),d.a.createElement("div",{dir:t.direction,className:e.flexGrow},d.a.createElement(Pe,null)),d.a.createElement("div",{dir:t.direction,className:e.scrollableContainer},o.map(function(e){return d.a.createElement(Ie,{player:e})}))))},we=Object(G.a)(function(e){return{button:{width:"100%",height:100,marginBottom:e.spacing(2)}}}),ze=function(){var e=we(),t=Object(f.useContext)(k.d),n=w(function(e){return e.player.items}),a=Y(function(e){return e.game.startGame}),r=w(function(e){return e.game.exisitingGame});return d.a.createElement(K,null,d.a.createElement(U.a,{variant:"outlined",color:"primary",classes:{root:e.button},onClick:function(){a({players:n}),t.history.push(v.GAME)}},"Zacznij now\u0105 gr\u0119"),d.a.createElement(U.a,{variant:"outlined",color:"primary",classes:{root:e.button},onClick:function(){return t.history.push(v.GAME)},disabled:!r},"Kontynuuj"))},ke=function(){return d.a.createElement(z.a,null,d.a.createElement(k.c,null,d.a.createElement(k.a,{exact:!0,path:v.MAIN_MENU,component:Z}),d.a.createElement(k.a,{exact:!0,path:v.PLAYERS,component:ee}),d.a.createElement(k.a,{exact:!0,path:v.ADD_PLAYER,component:re}),d.a.createElement(k.a,{exact:!0,path:v.ASSIGN_PLAYERS,component:ce}),d.a.createElement(k.a,{exact:!0,path:v.GAME,component:Ye}),d.a.createElement(k.a,{exact:!0,path:v.GAME_MENU,component:ze}),d.a.createElement(k.a,{exact:!0,path:"/fractions/players/:id",component:Ae})))},Ge=n(203),Re=n(103),We=function(){return d.a.createElement(f.Fragment,null,d.a.createElement(Re.a,{loading:d.a.createElement("div",null,"Loading"),persistor:P},d.a.createElement(b.a,{store:M},d.a.createElement(Ge.a,{component:"main",maxWidth:"xs"},d.a.createElement(y.a,null),d.a.createElement(ke,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));E.a.render(d.a.createElement(We,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[111,1,2]]]);
//# sourceMappingURL=main.27eee935.chunk.js.map